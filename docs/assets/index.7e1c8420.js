(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var _t=function(n,e){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},_t(n,e)};function W(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_t(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function qe(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(w){try{v(r.next(w))}catch(A){s(A)}}function l(w){try{v(r.throw(w))}catch(A){s(A)}}function v(w){w.done?o(w.value):i(w.value).then(c,l)}v((r=r.apply(n,e||[])).next())})}function ie(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(v){return function(w){return l([v,w])}}function l(v){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=v[0]&2?i.return:v[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,v[1])).done)return o;switch(i=0,o&&(v=[v[0]&2,o.value]),v[0]){case 0:case 1:o=v;break;case 4:return t.label++,{value:v[1],done:!1};case 5:t.label++,i=v[1],v=[0];continue;case 7:v=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){t=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){t.label=v[1];break}if(v[0]===6&&t.label<o[1]){t.label=o[1],o=v;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(v);break}o[2]&&t.ops.pop(),t.trys.pop();continue}v=e.call(n,t)}catch(w){v=[6,w],i=0}finally{r=o=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}function Y(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function G(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function N(n){return this instanceof N?(this.v=n,this):new N(n)}function Ge(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(g){r[g]&&(i[g]=function(I){return new Promise(function(j,x){o.push([g,I,j,x])>1||c(g,I)})})}function c(g,I){try{l(r[g](I))}catch(j){A(o[0][3],j)}}function l(g){g.value instanceof N?Promise.resolve(g.value.v).then(v,w):A(o[0][2],g)}function v(g){c("next",g)}function w(g){c("throw",g)}function A(g,I){g(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Be(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Y=="function"?Y(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(v){o({value:v,done:c})},s)}}function E(n){return typeof n=="function"}function At(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yt=At(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function at(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var J=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=Y(s),l=c.next();!l.done;l=c.next()){var v=l.value;v.remove(this)}}catch(x){e={error:x}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else s.remove(this);var w=this.initialTeardown;if(E(w))try{w()}catch(x){o=x instanceof yt?x.errors:[x]}var A=this._finalizers;if(A){this._finalizers=null;try{for(var g=Y(A),I=g.next();!I.done;I=g.next()){var j=I.value;try{Gt(j)}catch(x){o=o!=null?o:[],x instanceof yt?o=G(G([],q(o)),q(x.errors)):o.push(x)}}}catch(x){r={error:x}}finally{try{I&&!I.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(o)throw new yt(o)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Gt(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&at(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&at(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}(),oe=J.EMPTY;function se(n){return n instanceof J||n&&"closed"in n&&E(n.remove)&&E(n.add)&&E(n.unsubscribe)}function Gt(n){E(n)?n():n.unsubscribe()}var Tt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gt={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=gt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,G([n,e],q(t))):setTimeout.apply(void 0,G([n,e],q(t)))},clearTimeout:function(n){var e=gt.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function ue(n){gt.setTimeout(function(){throw n})}function Bt(){}var nt=null;function ot(n){if(Tt.useDeprecatedSynchronousErrorHandling){var e=!nt;if(e&&(nt={errorThrown:!1,error:null}),n(),e){var t=nt,r=t.errorThrown,i=t.error;if(nt=null,r)throw i}}else n()}var jt=function(n){W(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,se(t)&&t.add(r)):r.destination=Je,r}return e.create=function(t,r,i){return new xt(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(J),Xe=Function.prototype.bind;function mt(n,e){return Xe.call(n,e)}var Qe=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){rt(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){rt(r)}else rt(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){rt(t)}},n}(),xt=function(n){W(e,n);function e(t,r,i){var o=n.call(this)||this,s;if(E(t)||!t)s={next:t!=null?t:void 0,error:r!=null?r:void 0,complete:i!=null?i:void 0};else{var c;o&&Tt.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=function(){return o.unsubscribe()},s={next:t.next&&mt(t.next,c),error:t.error&&mt(t.error,c),complete:t.complete&&mt(t.complete,c)}):s=t}return o.destination=new Qe(s),o}return e}(jt);function rt(n){ue(n)}function Ze(n){throw n}var Je={closed:!0,next:Bt,error:Ze,complete:Bt},Ut=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ct(n){return n}function Ke(n){return n.length===0?Ct:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var T=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,o=en(e)?e:new xt(e,t,r);return ot(function(){var s=i,c=s.operator,l=s.source;o.add(c?c.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=Xt(t),new t(function(i,o){var s=new xt({next:function(c){try{e(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[Ut]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ke(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Xt(e),new e(function(r,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function Xt(n){var e;return(e=n!=null?n:Tt.Promise)!==null&&e!==void 0?e:Promise}function tn(n){return n&&E(n.next)&&E(n.error)&&E(n.complete)}function en(n){return n&&n instanceof jt||tn(n)&&se(n)}function nn(n){return E(n==null?void 0:n.lift)}function C(n){return function(e){if(nn(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function M(n,e,t,r,i){return new rn(n,e,t,r,i)}var rn=function(n){W(e,n);function e(t,r,i,o,s,c){var l=n.call(this,t)||this;return l.onFinalize=s,l.shouldUnsubscribe=c,l._next=r?function(v){try{r(v)}catch(w){t.error(w)}}:n.prototype._next,l._error=o?function(v){try{o(v)}catch(w){t.error(w)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=i?function(){try{i()}catch(v){t.error(v)}finally{this.unsubscribe()}}:n.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(jt),on=At(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),kt=function(n){W(e,n);function e(){var t=n.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var r=new Qt(this,this);return r.operator=t,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new on},e.prototype.next=function(t){var r=this;ot(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Y(r.currentObservers),c=s.next();!c.done;c=s.next()){var l=c.value;l.next(t)}}catch(v){i={error:v}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var r=this;ot(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;ot(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var r=this,i=this,o=i.hasError,s=i.isStopped,c=i.observers;return o||s?oe:(this.currentObservers=null,c.push(t),new J(function(){r.currentObservers=null,at(c,t)}))},e.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?t.error(o):s&&t.complete()},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,r){return new Qt(t,r)},e}(T),Qt=function(n){W(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,t)},e.prototype.error=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,t)},e.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},e.prototype._subscribe=function(t){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&i!==void 0?i:oe},e}(kt),Mt={now:function(){return(Mt.delegate||Date).now()},delegate:void 0},sn=function(n){W(e,n);function e(t,r,i){t===void 0&&(t=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Mt);var o=n.call(this)||this;return o._bufferSize=t,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,r),o}return e.prototype.next=function(t){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,c=r._timestampProvider,l=r._windowTime;i||(o.push(t),!s&&o.push(c.now()+l)),this._trimBuffer(),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this,o=i._infiniteTimeWindow,s=i._buffer,c=s.slice(),l=0;l<c.length&&!t.closed;l+=o?1:2)t.next(c[l]);return this._checkFinalizedStatuses(t),r},e.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,o=t._buffer,s=t._infiniteTimeWindow,c=(s?1:2)*r;if(r<1/0&&c<o.length&&o.splice(0,o.length-c),!s){for(var l=i.now(),v=0,w=1;w<o.length&&o[w]<=l;w+=2)v=w;v&&o.splice(0,v+1)}},e}(kt),un=function(n){W(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(J),ct={setInterval:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=ct.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,G([n,e],q(t))):setInterval.apply(void 0,G([n,e],q(t)))},clearInterval:function(n){var e=ct.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0},an=function(n){W(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),ct.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;ct.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,o;try{this.work(t)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,at(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(un),Zt=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=Mt.now,n}(),cn=function(n){W(e,n);function e(t,r){r===void 0&&(r=Zt.now);var i=n.call(this,t,r)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(Zt),fn=new cn(an),ln=new T(function(n){return n.complete()});function hn(n){return n&&E(n.schedule)}function vn(n){return n[n.length-1]}function ae(n){return hn(vn(n))?n.pop():void 0}var ce=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function fe(n){return E(n==null?void 0:n.then)}function le(n){return E(n[Ut])}function he(n){return Symbol.asyncIterator&&E(n==null?void 0:n[Symbol.asyncIterator])}function ve(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function dn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var de=dn();function pe(n){return E(n==null?void 0:n[de])}function ye(n){return Ge(this,arguments,function(){var t,r,i,o;return ie(this,function(s){switch(s.label){case 0:t=n.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,N(t.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,N(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,N(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function me(n){return E(n==null?void 0:n.getReader)}function K(n){if(n instanceof T)return n;if(n!=null){if(le(n))return pn(n);if(ce(n))return yn(n);if(fe(n))return mn(n);if(he(n))return we(n);if(pe(n))return wn(n);if(me(n))return bn(n)}throw ve(n)}function pn(n){return new T(function(e){var t=n[Ut]();if(E(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yn(n){return new T(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function mn(n){return new T(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ue)})}function wn(n){return new T(function(e){var t,r;try{for(var i=Y(n),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function we(n){return new T(function(e){_n(n,e).catch(function(t){return e.error(t)})})}function bn(n){return we(ye(n))}function _n(n,e){var t,r,i,o;return qe(this,void 0,void 0,function(){var s,c;return ie(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=Be(n),l.label=1;case 1:return[4,t.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),i={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function R(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function be(n,e){return e===void 0&&(e=0),C(function(t,r){t.subscribe(M(r,function(i){return R(r,n,function(){return r.next(i)},e)},function(){return R(r,n,function(){return r.complete()},e)},function(i){return R(r,n,function(){return r.error(i)},e)}))})}function _e(n,e){return e===void 0&&(e=0),C(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function gn(n,e){return K(n).pipe(_e(e),be(e))}function xn(n,e){return K(n).pipe(_e(e),be(e))}function Sn(n,e){return new T(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function En(n,e){return new T(function(t){var r;return R(t,e,function(){r=n[de](),R(t,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(c){t.error(c);return}s?t.complete():t.next(o)},0,!0)}),function(){return E(r==null?void 0:r.return)&&r.return()}})}function ge(n,e){if(!n)throw new Error("Iterable cannot be null");return new T(function(t){R(t,e,function(){var r=n[Symbol.asyncIterator]();R(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pn(n,e){return ge(ye(n),e)}function In(n,e){if(n!=null){if(le(n))return gn(n,e);if(ce(n))return Sn(n,e);if(fe(n))return xn(n,e);if(he(n))return ge(n,e);if(pe(n))return En(n,e);if(me(n))return Pn(n,e)}throw ve(n)}function On(n,e){return e?In(n,e):K(n)}var xe=At(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function X(n,e){return C(function(t,r){var i=0;t.subscribe(M(r,function(o){r.next(n.call(e,o,i++))}))})}function An(n,e,t,r,i,o,s,c){var l=[],v=0,w=0,A=!1,g=function(){A&&!l.length&&!v&&e.complete()},I=function(x){return v<r?j(x):l.push(x)},j=function(x){o&&e.next(x),v++;var et=!1;K(t(x,w++)).subscribe(M(e,function(L){i==null||i(L),o?I(L):e.next(L)},function(){et=!0},void 0,function(){if(et)try{v--;for(var L=function(){var $=l.shift();s?R(e,s,function(){return j($)}):j($)};l.length&&v<r;)L();g()}catch($){e.error($)}}))};return n.subscribe(M(e,I,function(){A=!0,g()})),function(){c==null||c()}}function Se(n,e,t){return t===void 0&&(t=1/0),E(e)?Se(function(r,i){return X(function(o,s){return e(r,o,i,s)})(K(n(r,i)))},t):(typeof e=="number"&&(t=e),C(function(r,i){return An(r,i,n,t)}))}function Tn(n){return n===void 0&&(n=1/0),Se(Ct,n)}function jn(){return Tn(1)}function Jt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return jn()(On(n,ae(n)))}function Un(n,e){return C(function(t,r){var i=0;t.subscribe(M(r,function(o){return n.call(e,o,i++)&&r.next(o)}))})}function Cn(n,e){return e===void 0&&(e=fn),C(function(t,r){var i=null,o=null,s=null,c=function(){if(i){i.unsubscribe(),i=null;var v=o;o=null,r.next(v)}};function l(){var v=s+n,w=e.now();if(w<v){i=this.schedule(void 0,v-w),r.add(i);return}c()}t.subscribe(M(r,function(v){o=v,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},function(){c(),r.complete()},void 0,function(){o=i=null}))})}function kn(n){return C(function(e,t){var r=!1;e.subscribe(M(t,function(i){r=!0,t.next(i)},function(){r||t.next(n),t.complete()}))})}function Mn(n){return n<=0?function(){return ln}:C(function(e,t){var r=0;e.subscribe(M(t,function(i){++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wn(n){return n===void 0&&(n=Fn),C(function(e,t){var r=!1;e.subscribe(M(t,function(i){r=!0,t.next(i)},function(){return r?t.complete():t.error(n())}))})}function Fn(){return new xe}function Dn(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?Un(function(i,o){return n(i,o,r)}):Ct,Mn(1),t?kn(e):Wn(function(){return new xe}))}}function Rn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=ae(n);return C(function(r,i){(t?Jt(n,r,t):Jt(n,r)).subscribe(i)})}var Q=function(){function n(e){this.name=e}return n}(),Ln=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kt=function(n){Ln(e,n);function e(t){var r,i,o=n.call(this)||this;return o.name="ServiceNotFoundError",o.normalizedIdentifier="<UNKNOWN_IDENTIFIER>",typeof t=="string"?o.normalizedIdentifier=t:t instanceof Q?o.normalizedIdentifier="Token<"+(t.name||"UNSET_NAME")+">":t&&(t.name||((r=t.prototype)===null||r===void 0?void 0:r.name))&&(o.normalizedIdentifier="MaybeConstructable<"+t.name+">"||"MaybeConstructable<"+((i=t.prototype)===null||i===void 0?void 0:i.name)+">"),o}return Object.defineProperty(e.prototype,"message",{get:function(){return'Service with "'+this.normalizedIdentifier+'" identifier was not found in the container. Register it before usage via explicitly calling the "Container.set" function or using the "@Service()" decorator.'},enumerable:!1,configurable:!0}),e}(Error),$n=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),te=function(n){$n(e,n);function e(t){var r,i,o=n.call(this)||this;return o.name="CannotInstantiateValueError",o.normalizedIdentifier="<UNKNOWN_IDENTIFIER>",typeof t=="string"?o.normalizedIdentifier=t:t instanceof Q?o.normalizedIdentifier="Token<"+(t.name||"UNSET_NAME")+">":t&&(t.name||((r=t.prototype)===null||r===void 0?void 0:r.name))&&(o.normalizedIdentifier="MaybeConstructable<"+t.name+">"||"MaybeConstructable<"+((i=t.prototype)===null||i===void 0?void 0:i.name)+">"),o}return Object.defineProperty(e.prototype,"message",{get:function(){return'Cannot instantiate the requested value for the "'+this.normalizedIdentifier+`" identifier. The related metadata doesn't contain a factory or a type to instantiate.`},enumerable:!1,configurable:!0}),e}(Error),D=Symbol("EMPTY_VALUE"),z=globalThis&&globalThis.__assign||function(){return z=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},z.apply(this,arguments)},Vn=globalThis&&globalThis.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r},St=function(){function n(e){this.services=[],this.id=e}return n.prototype.has=function(e){return!!this.findService(e)},n.prototype.get=function(e){var t=st.of(void 0),r=t.findService(e),i=this.findService(e);if(r&&r.global===!0)return this.getServiceValue(r);if(i)return this.getServiceValue(i);if(r&&this!==t){var o=z({},r);o.value=D,this.set(o);var s=this.getServiceValue(o);return this.set(z(z({},o),{value:s})),s}if(r)return this.getServiceValue(r);throw new Kt(e)},n.prototype.getMany=function(e){var t=this;return this.findAllServices(e).map(function(r){return t.getServiceValue(r)})},n.prototype.set=function(e,t){var r=this;if(e instanceof Array)return e.forEach(function(s){return r.set(s)}),this;if(typeof e=="string"||e instanceof Q)return this.set({id:e,type:null,value:t,factory:void 0,global:!1,multiple:!1,eager:!1,transient:!1});if(typeof e=="function")return this.set({id:e,type:e,value:t,factory:void 0,global:!1,multiple:!1,eager:!1,transient:!1});var i=z({id:new Q("UNREACHABLE"),type:null,factory:void 0,value:D,global:!1,multiple:!1,eager:!1,transient:!1},e),o=this.findService(i.id);return o&&o.multiple!==!0?Object.assign(o,i):this.services.push(i),i.eager&&this.get(i.id),this},n.prototype.remove=function(e){var t=this;return Array.isArray(e)?e.forEach(function(r){return t.remove(r)}):this.services=this.services.filter(function(r){return r.id===e?(t.destroyServiceInstance(r),!1):!0}),this},n.prototype.reset=function(e){var t=this;switch(e===void 0&&(e={strategy:"resetValue"}),e.strategy){case"resetValue":this.services.forEach(function(r){return t.destroyServiceInstance(r)});break;case"resetServices":this.services.forEach(function(r){return t.destroyServiceInstance(r)}),this.services=[];break;default:throw new Error("Received invalid reset strategy.")}return this},n.prototype.findAllServices=function(e){return this.services.filter(function(t){return t.id===e})},n.prototype.findService=function(e){return this.services.find(function(t){return t.id===e})},n.prototype.getServiceValue=function(e){var t,r=D;if(e.value!==D)return e.value;if(!e.factory&&!e.type)throw new te(e.id);if(e.factory)if(e.factory instanceof Array){var i=void 0;try{i=this.get(e.factory[0])}catch(l){if(l instanceof Kt)i=new e.factory[0];else throw l}r=i[e.factory[1]](this,e.id)}else r=e.factory(this,e.id);if(!e.factory&&e.type){var o=e.type,s=((t=Reflect)===null||t===void 0?void 0:t.getMetadata("design:paramtypes",o))||[],c=this.initializeParams(o,s);c.push(this),r=new(o.bind.apply(o,Vn([void 0],c)))}if(!e.transient&&r!==D&&(e.value=r),r===D)throw new te(e.id);return e.type&&this.applyPropertyHandlers(e.type,r),r},n.prototype.initializeParams=function(e,t){var r=this;return t.map(function(i,o){var s=st.handlers.find(function(c){return(c.object===e||c.object===Object.getPrototypeOf(e))&&c.index===o});if(s)return s.value(r);if(i&&i.name&&!r.isPrimitiveParamType(i.name))return r.get(i)})},n.prototype.isPrimitiveParamType=function(e){return["string","boolean","number","object"].includes(e.toLowerCase())},n.prototype.applyPropertyHandlers=function(e,t){var r=this;st.handlers.forEach(function(i){typeof i.index!="number"&&(i.object.constructor!==e&&!(e.prototype instanceof i.object.constructor)||i.propertyName&&(t[i.propertyName]=i.value(r)))})},n.prototype.destroyServiceInstance=function(e,t){t===void 0&&(t=!1);var r=t||!!e.type||!!e.factory;if(r){if(typeof(e==null?void 0:e.value).destroy=="function")try{e.value.destroy()}catch{}e.value=D}},n}(),st=function(){function n(){}return n.of=function(e){if(e===void 0&&(e="default"),e==="default")return this.globalInstance;var t=this.instances.find(function(r){return r.id===e});return t||(t=new St(e),this.instances.push(t)),t},n.has=function(e){return this.globalInstance.has(e)},n.get=function(e){return this.globalInstance.get(e)},n.getMany=function(e){return this.globalInstance.getMany(e)},n.set=function(e,t){return this.globalInstance.set(e,t),this},n.remove=function(e){return this.globalInstance.remove(e),this},n.reset=function(e){if(e===void 0&&(e="default"),e=="default")this.globalInstance.reset(),this.instances.forEach(function(r){return r.reset()});else{var t=this.instances.find(function(r){return r.id===e});t&&(t.reset(),this.instances.splice(this.instances.indexOf(t),1))}return this},n.registerHandler=function(e){return this.handlers.push(e),this},n.import=function(e){return this},n.handlers=[],n.globalInstance=new St("default"),n.instances=[],n}();function tt(n){return function(e){var t={id:e,type:e,factory:void 0,multiple:!1,global:!1,eager:!1,transient:!1,value:D};n instanceof Q||typeof n=="string"?t.id=n:n&&(t.id=n.id||e,t.factory=n.factory||void 0,t.multiple=n.multiple||!1,t.global=n.global||!1,t.eager=n.eager||!1,t.transient=n.transient||!1),st.set(t)}}var Hn=Object.defineProperty,zn=Object.getOwnPropertyDescriptor,Nn=(n,e,t,r)=>{for(var i=r>1?void 0:r?zn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Hn(e,t,i),i};let Z=class{encode(n){return btoa(n)}decode(n){return atob(n)}};Z=Nn([tt()],Z);var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ne;(function(n){(function(e){var t=typeof ee=="object"?ee:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=i(n);typeof t.Reflect>"u"?t.Reflect=n:r=i(t.Reflect,r),e(r);function i(o,s){return function(c,l){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:l}),s&&s(c,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",i=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",c={__proto__:[]}instanceof Array,l=!s&&!c,v={create:s?function(){return pt(Object.create(null))}:c?function(){return pt({__proto__:null})}:function(){return pt({})},has:l?function(u,a){return t.call(u,a)}:function(u,a){return a in u},get:l?function(u,a){return t.call(u,a)?u[a]:void 0}:function(u,a){return u[a]}},w=Object.getPrototypeOf(Function),A=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",g=!A&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ze(),I=!A&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ne(),j=!A&&typeof WeakMap=="function"?WeakMap:Ye(),x=new j;function et(u,a,f,h){if(S(f)){if(!zt(u))throw new TypeError;if(!Nt(a))throw new TypeError;return Ue(u,a)}else{if(!zt(u))throw new TypeError;if(!P(a))throw new TypeError;if(!P(h)&&!S(h)&&!V(h))throw new TypeError;return V(h)&&(h=void 0),f=k(f),Ce(u,a,f,h)}}e("decorate",et);function L(u,a){function f(h,d){if(!P(h))throw new TypeError;if(!S(d)&&!Re(d))throw new TypeError;Lt(u,a,h,d)}return f}e("metadata",L);function $(u,a,f,h){if(!P(f))throw new TypeError;return S(h)||(h=k(h)),Lt(u,a,f,h)}e("defineMetadata",$);function Ee(u,a,f){if(!P(a))throw new TypeError;return S(f)||(f=k(f)),Ft(u,a,f)}e("hasMetadata",Ee);function Pe(u,a,f){if(!P(a))throw new TypeError;return S(f)||(f=k(f)),vt(u,a,f)}e("hasOwnMetadata",Pe);function Ie(u,a,f){if(!P(a))throw new TypeError;return S(f)||(f=k(f)),Dt(u,a,f)}e("getMetadata",Ie);function Oe(u,a,f){if(!P(a))throw new TypeError;return S(f)||(f=k(f)),Rt(u,a,f)}e("getOwnMetadata",Oe);function Ae(u,a){if(!P(u))throw new TypeError;return S(a)||(a=k(a)),$t(u,a)}e("getMetadataKeys",Ae);function Te(u,a){if(!P(u))throw new TypeError;return S(a)||(a=k(a)),Vt(u,a)}e("getOwnMetadataKeys",Te);function je(u,a,f){if(!P(a))throw new TypeError;S(f)||(f=k(f));var h=B(a,f,!1);if(S(h)||!h.delete(u))return!1;if(h.size>0)return!0;var d=x.get(a);return d.delete(f),d.size>0||x.delete(a),!0}e("deleteMetadata",je);function Ue(u,a){for(var f=u.length-1;f>=0;--f){var h=u[f],d=h(a);if(!S(d)&&!V(d)){if(!Nt(d))throw new TypeError;a=d}}return a}function Ce(u,a,f,h){for(var d=u.length-1;d>=0;--d){var O=u[d],y=O(a,f,h);if(!S(y)&&!V(y)){if(!P(y))throw new TypeError;h=y}}return h}function B(u,a,f){var h=x.get(u);if(S(h)){if(!f)return;h=new g,x.set(u,h)}var d=h.get(a);if(S(d)){if(!f)return;d=new g,h.set(a,d)}return d}function Ft(u,a,f){var h=vt(u,a,f);if(h)return!0;var d=dt(a);return V(d)?!1:Ft(u,d,f)}function vt(u,a,f){var h=B(a,f,!1);return S(h)?!1:Fe(h.has(u))}function Dt(u,a,f){var h=vt(u,a,f);if(h)return Rt(u,a,f);var d=dt(a);if(!V(d))return Dt(u,d,f)}function Rt(u,a,f){var h=B(a,f,!1);if(!S(h))return h.get(u)}function Lt(u,a,f,h){var d=B(f,h,!0);d.set(u,a)}function $t(u,a){var f=Vt(u,a),h=dt(u);if(h===null)return f;var d=$t(h,a);if(d.length<=0)return f;if(f.length<=0)return d;for(var O=new I,y=[],m=0,p=f;m<p.length;m++){var b=p[m],_=O.has(b);_||(O.add(b),y.push(b))}for(var F=0,qt=d;F<qt.length;F++){var b=qt[F],_=O.has(b);_||(O.add(b),y.push(b))}return y}function Vt(u,a){var f=[],h=B(u,a,!1);if(S(h))return f;for(var d=h.keys(),O=Le(d),y=0;;){var m=Ve(O);if(!m)return f.length=y,f;var p=$e(m);try{f[y]=p}catch(b){try{He(O)}finally{throw b}}y++}}function Ht(u){if(u===null)return 1;switch(typeof u){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return u===null?1:6;default:return 6}}function S(u){return u===void 0}function V(u){return u===null}function ke(u){return typeof u=="symbol"}function P(u){return typeof u=="object"?u!==null:typeof u=="function"}function Me(u,a){switch(Ht(u)){case 0:return u;case 1:return u;case 2:return u;case 3:return u;case 4:return u;case 5:return u}var f=a===3?"string":a===5?"number":"default",h=Yt(u,i);if(h!==void 0){var d=h.call(u,f);if(P(d))throw new TypeError;return d}return We(u,f==="default"?"number":f)}function We(u,a){if(a==="string"){var f=u.toString;if(H(f)){var h=f.call(u);if(!P(h))return h}var d=u.valueOf;if(H(d)){var h=d.call(u);if(!P(h))return h}}else{var d=u.valueOf;if(H(d)){var h=d.call(u);if(!P(h))return h}var O=u.toString;if(H(O)){var h=O.call(u);if(!P(h))return h}}throw new TypeError}function Fe(u){return!!u}function De(u){return""+u}function k(u){var a=Me(u,3);return ke(a)?a:De(a)}function zt(u){return Array.isArray?Array.isArray(u):u instanceof Object?u instanceof Array:Object.prototype.toString.call(u)==="[object Array]"}function H(u){return typeof u=="function"}function Nt(u){return typeof u=="function"}function Re(u){switch(Ht(u)){case 3:return!0;case 4:return!0;default:return!1}}function Yt(u,a){var f=u[a];if(f!=null){if(!H(f))throw new TypeError;return f}}function Le(u){var a=Yt(u,o);if(!H(a))throw new TypeError;var f=a.call(u);if(!P(f))throw new TypeError;return f}function $e(u){return u.value}function Ve(u){var a=u.next();return a.done?!1:a}function He(u){var a=u.return;a&&a.call(u)}function dt(u){var a=Object.getPrototypeOf(u);if(typeof u!="function"||u===w||a!==w)return a;var f=u.prototype,h=f&&Object.getPrototypeOf(f);if(h==null||h===Object.prototype)return a;var d=h.constructor;return typeof d!="function"||d===u?a:d}function ze(){var u={},a=[],f=function(){function y(m,p,b){this._index=0,this._keys=m,this._values=p,this._selector=b}return y.prototype["@@iterator"]=function(){return this},y.prototype[o]=function(){return this},y.prototype.next=function(){var m=this._index;if(m>=0&&m<this._keys.length){var p=this._selector(this._keys[m],this._values[m]);return m+1>=this._keys.length?(this._index=-1,this._keys=a,this._values=a):this._index++,{value:p,done:!1}}return{value:void 0,done:!0}},y.prototype.throw=function(m){throw this._index>=0&&(this._index=-1,this._keys=a,this._values=a),m},y.prototype.return=function(m){return this._index>=0&&(this._index=-1,this._keys=a,this._values=a),{value:m,done:!0}},y}();return function(){function y(){this._keys=[],this._values=[],this._cacheKey=u,this._cacheIndex=-2}return Object.defineProperty(y.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),y.prototype.has=function(m){return this._find(m,!1)>=0},y.prototype.get=function(m){var p=this._find(m,!1);return p>=0?this._values[p]:void 0},y.prototype.set=function(m,p){var b=this._find(m,!0);return this._values[b]=p,this},y.prototype.delete=function(m){var p=this._find(m,!1);if(p>=0){for(var b=this._keys.length,_=p+1;_<b;_++)this._keys[_-1]=this._keys[_],this._values[_-1]=this._values[_];return this._keys.length--,this._values.length--,m===this._cacheKey&&(this._cacheKey=u,this._cacheIndex=-2),!0}return!1},y.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=u,this._cacheIndex=-2},y.prototype.keys=function(){return new f(this._keys,this._values,h)},y.prototype.values=function(){return new f(this._keys,this._values,d)},y.prototype.entries=function(){return new f(this._keys,this._values,O)},y.prototype["@@iterator"]=function(){return this.entries()},y.prototype[o]=function(){return this.entries()},y.prototype._find=function(m,p){return this._cacheKey!==m&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=m)),this._cacheIndex<0&&p&&(this._cacheIndex=this._keys.length,this._keys.push(m),this._values.push(void 0)),this._cacheIndex},y}();function h(y,m){return y}function d(y,m){return m}function O(y,m){return[y,m]}}function Ne(){return function(){function u(){this._map=new g}return Object.defineProperty(u.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),u.prototype.has=function(a){return this._map.has(a)},u.prototype.add=function(a){return this._map.set(a,a),this},u.prototype.delete=function(a){return this._map.delete(a)},u.prototype.clear=function(){this._map.clear()},u.prototype.keys=function(){return this._map.keys()},u.prototype.values=function(){return this._map.values()},u.prototype.entries=function(){return this._map.entries()},u.prototype["@@iterator"]=function(){return this.keys()},u.prototype[o]=function(){return this.keys()},u}()}function Ye(){var u=16,a=v.create(),f=h();return function(){function p(){this._key=h()}return p.prototype.has=function(b){var _=d(b,!1);return _!==void 0?v.has(_,this._key):!1},p.prototype.get=function(b){var _=d(b,!1);return _!==void 0?v.get(_,this._key):void 0},p.prototype.set=function(b,_){var F=d(b,!0);return F[this._key]=_,this},p.prototype.delete=function(b){var _=d(b,!1);return _!==void 0?delete _[this._key]:!1},p.prototype.clear=function(){this._key=h()},p}();function h(){var p;do p="@@WeakMap@@"+m();while(v.has(a,p));return a[p]=!0,p}function d(p,b){if(!t.call(p,f)){if(!b)return;Object.defineProperty(p,f,{value:v.create()})}return p[f]}function O(p,b){for(var _=0;_<b;++_)p[_]=Math.random()*255|0;return p}function y(p){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(p)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(p)):O(new Uint8Array(p),p):O(new Array(p),p)}function m(){var p=y(u);p[6]=p[6]&79|64,p[8]=p[8]&191|128;for(var b="",_=0;_<u;++_){var F=p[_];(_===4||_===6||_===8)&&(b+="-"),F<16&&(b+="0"),b+=F.toString(16).toLowerCase()}return b}}function pt(u){return u.__=void 0,delete u.__,u}})})(ne||(ne={}));class Yn{constructor(e){this.controllers=e}run(){window.addEventListener("DOMContentLoaded",()=>{const e=new St(new Date().toISOString());e.set(Window,window),this.controllers.forEach(t=>{const r=e.get(t);r.onInit&&r.onInit()})})}}const ut=["ratio","center"];class it extends Error{}class Et extends Error{}class ft{constructor(e){this.value=e}}class U{constructor(e){this.value=e}}function wt(n,e,t){return new ft(e.value/2+n.value*t)}function bt(n,e,t){return new ft(e.value/2+n.value*t)}function Pt(n){return!Number.isNaN(n)}function qn(n){return Pt(n)&&Number.isInteger(n)}function re(n){return qn(n)&&n!==0}function Wt(n){return n.reduce((e,t)=>({...e,...t}),{})}var Gn=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,Xn=(n,e,t,r)=>{for(var i=r>1?void 0:r?Bn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Gn(e,t,i),i};let lt=class{constructor(n){this.encoder=n.get(Z)}getFiltredQueryParams(n,e){return Wt(Object.keys(n).filter(e).map(t=>({[t]:this.encoder.decode(n[t])})))}};lt=Xn([tt()],lt);var Qn=Object.defineProperty,Zn=Object.getOwnPropertyDescriptor,Jn=(n,e,t,r)=>{for(var i=r>1?void 0:r?Zn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Qn(e,t,i),i};let ht=class{constructor(n){this.queryParams$=new sn(1),this.window=n.get(Window);const e=new URLSearchParams(this.window.location.search).entries();let t=e.next();const r=[];for(;!t.done;)r.push(t.value),t=e.next();this.queryParams$.next(Wt(r.sort((i,o)=>o[0].localeCompare(i[0])).map(i=>({[i[0]]:i[1]}))))}navigate(n){const e=new URL(this.window.location.href);Object.keys(n).forEach(t=>{e.searchParams.set(t,n[t])}),console.log(e),this.window.history.pushState(null,"Free Mathematic Formula Drawer",e.pathname+e.search),this.queryParams$.next(n)}};ht=Jn([tt()],ht);var Kn=Object.defineProperty,tr=Object.getOwnPropertyDescriptor,er=(n,e,t,r)=>{for(var i=r>1?void 0:r?tr(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Kn(e,t,i),i};let It=class{constructor(n){this.ratio={unit:1,pixelsPeerUnits:100},this.center={x:new U(0),y:new U(0)},this.router=n.get(ht),this.encoder=n.get(Z),this.queryParamsAnalyzer=n.get(lt);const t=n.get(Window).document.querySelector("canvas");if(!t)throw new Et;this.canvas=t;const r=t.getContext("2d");if(!r)throw new Et;this.context=r;const i=t.height=t.offsetHeight;this.canvasHeight=new ft(i);const o=t.width=t.offsetWidth;this.canvasWidth=new ft(o)}onInit(){const n=new kt;n.pipe(Rn(void 0),Cn(0)).subscribe(()=>{this.draw()});const e=this.router.queryParams$;e.pipe(X(t=>this.queryParamsAnalyzer.getFiltredQueryParams(t,r=>!ut.includes(r)))).subscribe(()=>{n.next()}),e.pipe(X(t=>this.queryParamsAnalyzer.getFiltredQueryParams(t,r=>ut.includes(r)))).subscribe(t=>{ut.forEach(r=>{const i=t[r];if(r==="ratio"&&!!i){const[o,s]=i.split("/"),c=+o;if(!re(c))throw new it;const l=+s;if(!re(l))throw new it;this.ratio.unit=c,this.ratio.pixelsPeerUnits=l,n.next();return}if(r==="center"&&!!i){const[o,s]=this.encoder.decode(i).split("/"),c=parseFloat(o);if(!Pt(c))throw new it;const l=parseFloat(s);if(!Pt(l))throw new it;this.center.x=new U(c),this.center.y=new U(l),n.next();return}})}),this.canvas.addEventListener("wheel",t=>{const r=t.wheelDeltaY>0,i=5;r?this.ratio.pixelsPeerUnits+=i:this.ratio.pixelsPeerUnits>i+1&&(this.ratio.pixelsPeerUnits-=i),this.router.navigate({ratio:this.encoder.encode(`${this.ratio.unit}/${this.ratio.pixelsPeerUnits}`)})})}draw(){this.context.clearRect(0,0,this.canvasWidth.value,this.canvasHeight.value);const n=this.center.x.value-this.canvasWidth.value/2,e=this.center.y.value-this.canvasHeight.value/2,t=this.center.x.value+this.canvasWidth.value/2,r=this.center.y.value+this.canvasHeight.value/2;if(n<0&&t>0){this.context.beginPath(),this.context.strokeStyle="red",this.context.lineWidth=1;const s=this.center.x.value>=0?this.center.x:new U(-this.center.x.value),c=wt(s,this.canvasWidth,this.ratio.pixelsPeerUnits);this.context.moveTo(c.value,0),this.context.lineTo(c.value,this.canvasHeight.value),this.context.stroke()}if(e<0&&r>0){this.context.beginPath(),this.context.strokeStyle="grey",this.context.lineWidth=1;const s=this.center.y.value>=0?this.center.y:new U(-this.center.y.value),c=bt(s,this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.moveTo(0,c.value),this.context.lineTo(this.canvasWidth.value,c.value),this.context.stroke()}const i=this.computeMiddleOfUnitsOnAxe(this.canvasWidth);for(let s=0-i;s<i;s=s+this.ratio.unit){this.context.beginPath(),this.context.strokeStyle="#000000",this.context.font="12px Arial";const c=wt(new U(s),this.canvasWidth,this.ratio.pixelsPeerUnits),l=bt(new U(0),this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.fillText(s.toString(),c.value-18,l.value-6),this.context.fillRect(c.value,l.value-5,1,10)}const o=this.computeMiddleOfUnitsOnAxe(this.canvasWidth);for(let s=0-o;s<o;s=s+this.ratio.unit){this.context.beginPath(),this.context.strokeStyle="#000000",this.context.font="12px Arial";const c=wt(new U(0),this.canvasWidth,this.ratio.pixelsPeerUnits),l=bt(new U(s),this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.fillText(s.toString(),c.value-18,l.value-6),this.context.fillRect(c.value-5,l.value,10,1)}}computeMiddleOfUnitsOnAxe(n){return parseFloat((n.value/this.ratio.pixelsPeerUnits).toFixed(this.ratio.unit-1))/2}};It=er([tt()],It);var nr=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,ir=(n,e,t,r)=>{for(var i=r>1?void 0:r?rr(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&nr(e,t,i),i};let Ot=class{constructor(n){this.textareas=new Array,this.router=n.get(ht),this.encoder=n.get(Z),this.queryParamsAnalyzer=n.get(lt);const e=n.get(Window);this.document=e.document;const t=this.document.querySelector("form");if(!t)throw new Et;this.form=t}onInit(){this.router.queryParams$.pipe(Dn(),X(n=>this.queryParamsAnalyzer.getFiltredQueryParams(n,e=>!ut.includes(e))),X(n=>Object.keys(n).length>0?n:{f:""})).subscribe(n=>{Object.keys(n).forEach(e=>{this.createFormulaField({key:e,queryParams:n})})}),this.form.addEventListener("submit",n=>{n.preventDefault();const e=Wt(this.textareas.sort((t,r)=>t.name.localeCompare(r.name)).map(t=>({[t.name]:this.encoder.encode(t.value)})));this.router.navigate(e)})}createFormulaField({key:n,queryParams:e}){const t=this.document.createElement("div"),r=this.document.createElement("label");r.textContent=`${n}(x) = `,r.htmlFor=n,t.appendChild(r);const i=this.document.createElement("textarea");i.name=n;const o=e[n];i.value=o,i.placeholder="Formula",i.rows=o.split(`
`).length,i.addEventListener("keypress",s=>{s.code==="Enter"&&(s.shiftKey||(s.preventDefault(),this.form.dispatchEvent(new SubmitEvent("submit"))))}),i.addEventListener("keyup",()=>{const c=i.value.split(`
`).length-i.rows;if(c!==0)for(let l=0;l<Math.abs(c);++l){if(c>0){i.rows++;return}i.rows--}}),t.appendChild(i),this.textareas.push(i),this.form.prepend(t)}};Ot=ir([tt()],Ot);new Yn([Ot,It]).run();
