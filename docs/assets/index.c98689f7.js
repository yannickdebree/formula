(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var wt=function(n,e){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},wt(n,e)};function W(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");wt(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ze(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(w){try{d(r.next(w))}catch(T){s(T)}}function l(w){try{d(r.throw(w))}catch(T){s(T)}}function d(w){w.done?o(w.value):i(w.value).then(c,l)}d((r=r.apply(n,e||[])).next())})}function re(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(w){return l([d,w])}}function l(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(w){d=[6,w],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function z(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function q(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Y(n){return this instanceof Y?(this.v=n,this):new Y(n)}function Ge(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(g){r[g]&&(i[g]=function(P){return new Promise(function(j,x){o.push([g,P,j,x])>1||c(g,P)})})}function c(g,P){try{l(r[g](P))}catch(j){T(o[0][3],j)}}function l(g){g.value instanceof Y?Promise.resolve(g.value.v).then(d,w):T(o[0][2],g)}function d(g){c("next",g)}function w(g){c("throw",g)}function T(g,P){g(P),o.shift(),o.length&&c(o[0][0],o[0][1])}}function qe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof z=="function"?z(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(d){o({value:d,done:c})},s)}}function E(n){return typeof n=="function"}function Tt(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vt=Tt(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function ot(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Z=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=z(s),l=c.next();!l.done;l=c.next()){var d=l.value;d.remove(this)}}catch(x){e={error:x}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else s.remove(this);var w=this.initialTeardown;if(E(w))try{w()}catch(x){o=x instanceof vt?x.errors:[x]}var T=this._finalizers;if(T){this._finalizers=null;try{for(var g=z(T),P=g.next();!P.done;P=g.next()){var j=P.value;try{Gt(j)}catch(x){o=o!=null?o:[],x instanceof vt?o=q(q([],G(o)),G(x.errors)):o.push(x)}}}catch(x){r={error:x}}finally{try{P&&!P.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(o)throw new vt(o)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Gt(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ot(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&ot(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}(),ie=Z.EMPTY;function oe(n){return n instanceof Z||n&&"closed"in n&&E(n.remove)&&E(n.add)&&E(n.unsubscribe)}function Gt(n){E(n)?n():n.unsubscribe()}var At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bt={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=bt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,q([n,e],G(t))):setTimeout.apply(void 0,q([n,e],G(t)))},clearTimeout:function(n){var e=bt.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function se(n){bt.setTimeout(function(){throw n})}function qt(){}var K=null;function nt(n){if(At.useDeprecatedSynchronousErrorHandling){var e=!K;if(e&&(K={errorThrown:!1,error:null}),n(),e){var t=K,r=t.errorThrown,i=t.error;if(K=null,r)throw i}}else n()}var jt=function(n){W(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,oe(t)&&t.add(r)):r.destination=Je,r}return e.create=function(t,r,i){return new _t(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Z),Be=Function.prototype.bind;function pt(n,e){return Be.call(n,e)}var Xe=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){tt(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){tt(r)}else tt(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){tt(t)}},n}(),_t=function(n){W(e,n);function e(t,r,i){var o=n.call(this)||this,s;if(E(t)||!t)s={next:t!=null?t:void 0,error:r!=null?r:void 0,complete:i!=null?i:void 0};else{var c;o&&At.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=function(){return o.unsubscribe()},s={next:t.next&&pt(t.next,c),error:t.error&&pt(t.error,c),complete:t.complete&&pt(t.complete,c)}):s=t}return o.destination=new Xe(s),o}return e}(jt);function tt(n){se(n)}function Ze(n){throw n}var Je={closed:!0,next:qt,error:Ze,complete:qt},kt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ut(n){return n}function Qe(n){return n.length===0?Ut:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var A=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,o=tn(e)?e:new _t(e,t,r);return nt(function(){var s=i,c=s.operator,l=s.source;o.add(c?c.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=Bt(t),new t(function(i,o){var s=new _t({next:function(c){try{e(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[kt]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Qe(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Bt(e),new e(function(r,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function Bt(n){var e;return(e=n!=null?n:At.Promise)!==null&&e!==void 0?e:Promise}function Ke(n){return n&&E(n.next)&&E(n.error)&&E(n.complete)}function tn(n){return n&&n instanceof jt||Ke(n)&&oe(n)}function en(n){return E(n==null?void 0:n.lift)}function U(n){return function(e){if(en(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function M(n,e,t,r,i){return new nn(n,e,t,r,i)}var nn=function(n){W(e,n);function e(t,r,i,o,s,c){var l=n.call(this,t)||this;return l.onFinalize=s,l.shouldUnsubscribe=c,l._next=r?function(d){try{r(d)}catch(w){t.error(w)}}:n.prototype._next,l._error=o?function(d){try{o(d)}catch(w){t.error(w)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=i?function(){try{i()}catch(d){t.error(d)}finally{this.unsubscribe()}}:n.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(jt),rn=Tt(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ct=function(n){W(e,n);function e(){var t=n.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var r=new Xt(this,this);return r.operator=t,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new rn},e.prototype.next=function(t){var r=this;nt(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=z(r.currentObservers),c=s.next();!c.done;c=s.next()){var l=c.value;l.next(t)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var r=this;nt(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;nt(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var r=this,i=this,o=i.hasError,s=i.isStopped,c=i.observers;return o||s?ie:(this.currentObservers=null,c.push(t),new Z(function(){r.currentObservers=null,ot(c,t)}))},e.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?t.error(o):s&&t.complete()},e.prototype.asObservable=function(){var t=new A;return t.source=this,t},e.create=function(t,r){return new Xt(t,r)},e}(A),Xt=function(n){W(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,t)},e.prototype.error=function(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,t)},e.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},e.prototype._subscribe=function(t){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&i!==void 0?i:ie},e}(Ct),Mt={now:function(){return(Mt.delegate||Date).now()},delegate:void 0},on=function(n){W(e,n);function e(t,r,i){t===void 0&&(t=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Mt);var o=n.call(this)||this;return o._bufferSize=t,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,r),o}return e.prototype.next=function(t){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,c=r._timestampProvider,l=r._windowTime;i||(o.push(t),!s&&o.push(c.now()+l)),this._trimBuffer(),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this,o=i._infiniteTimeWindow,s=i._buffer,c=s.slice(),l=0;l<c.length&&!t.closed;l+=o?1:2)t.next(c[l]);return this._checkFinalizedStatuses(t),r},e.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,o=t._buffer,s=t._infiniteTimeWindow,c=(s?1:2)*r;if(r<1/0&&c<o.length&&o.splice(0,o.length-c),!s){for(var l=i.now(),d=0,w=1;w<o.length&&o[w]<=l;w+=2)d=w;d&&o.splice(0,d+1)}},e}(Ct),sn=function(n){W(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(Z),st={setInterval:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=st.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,q([n,e],G(t))):setInterval.apply(void 0,q([n,e],G(t)))},clearInterval:function(n){var e=st.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0},un=function(n){W(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),st.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;st.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,o;try{this.work(t)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ot(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(sn),Zt=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},n.now=Mt.now,n}(),an=function(n){W(e,n);function e(t,r){r===void 0&&(r=Zt.now);var i=n.call(this,t,r)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(Zt),cn=new an(un),fn=new A(function(n){return n.complete()});function ln(n){return n&&E(n.schedule)}function hn(n){return n[n.length-1]}function ue(n){return ln(hn(n))?n.pop():void 0}var ae=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function ce(n){return E(n==null?void 0:n.then)}function fe(n){return E(n[kt])}function le(n){return Symbol.asyncIterator&&E(n==null?void 0:n[Symbol.asyncIterator])}function he(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function dn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var de=dn();function ve(n){return E(n==null?void 0:n[de])}function pe(n){return Ge(this,arguments,function(){var t,r,i,o;return re(this,function(s){switch(s.label){case 0:t=n.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Y(t.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Y(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Y(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function ye(n){return E(n==null?void 0:n.getReader)}function J(n){if(n instanceof A)return n;if(n!=null){if(fe(n))return vn(n);if(ae(n))return pn(n);if(ce(n))return yn(n);if(le(n))return me(n);if(ve(n))return mn(n);if(ye(n))return wn(n)}throw he(n)}function vn(n){return new A(function(e){var t=n[kt]();if(E(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pn(n){return new A(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yn(n){return new A(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,se)})}function mn(n){return new A(function(e){var t,r;try{for(var i=z(n),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function me(n){return new A(function(e){bn(n,e).catch(function(t){return e.error(t)})})}function wn(n){return me(pe(n))}function bn(n,e){var t,r,i,o;return ze(this,void 0,void 0,function(){var s,c;return re(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=qe(n),l.label=1;case 1:return[4,t.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),i={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function F(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function we(n,e){return e===void 0&&(e=0),U(function(t,r){t.subscribe(M(r,function(i){return F(r,n,function(){return r.next(i)},e)},function(){return F(r,n,function(){return r.complete()},e)},function(i){return F(r,n,function(){return r.error(i)},e)}))})}function be(n,e){return e===void 0&&(e=0),U(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function _n(n,e){return J(n).pipe(be(e),we(e))}function gn(n,e){return J(n).pipe(be(e),we(e))}function xn(n,e){return new A(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Sn(n,e){return new A(function(t){var r;return F(t,e,function(){r=n[de](),F(t,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(c){t.error(c);return}s?t.complete():t.next(o)},0,!0)}),function(){return E(r==null?void 0:r.return)&&r.return()}})}function _e(n,e){if(!n)throw new Error("Iterable cannot be null");return new A(function(t){F(t,e,function(){var r=n[Symbol.asyncIterator]();F(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function En(n,e){return _e(pe(n),e)}function In(n,e){if(n!=null){if(fe(n))return _n(n,e);if(ae(n))return xn(n,e);if(ce(n))return gn(n,e);if(le(n))return _e(n,e);if(ve(n))return Sn(n,e);if(ye(n))return En(n,e)}throw he(n)}function Pn(n,e){return e?In(n,e):J(n)}var ge=Tt(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function gt(n,e){return U(function(t,r){var i=0;t.subscribe(M(r,function(o){r.next(n.call(e,o,i++))}))})}function On(n,e,t,r,i,o,s,c){var l=[],d=0,w=0,T=!1,g=function(){T&&!l.length&&!d&&e.complete()},P=function(x){return d<r?j(x):l.push(x)},j=function(x){o&&e.next(x),d++;var Q=!1;J(t(x,w++)).subscribe(M(e,function(L){i==null||i(L),o?P(L):e.next(L)},function(){Q=!0},void 0,function(){if(Q)try{d--;for(var L=function(){var V=l.shift();s?F(e,s,function(){return j(V)}):j(V)};l.length&&d<r;)L();g()}catch(V){e.error(V)}}))};return n.subscribe(M(e,P,function(){T=!0,g()})),function(){c==null||c()}}function xe(n,e,t){return t===void 0&&(t=1/0),E(e)?xe(function(r,i){return gt(function(o,s){return e(r,o,i,s)})(J(n(r,i)))},t):(typeof e=="number"&&(t=e),U(function(r,i){return On(r,i,n,t)}))}function Tn(n){return n===void 0&&(n=1/0),xe(Ut,n)}function An(){return Tn(1)}function Jt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return An()(Pn(n,ue(n)))}function xt(n,e){return U(function(t,r){var i=0;t.subscribe(M(r,function(o){return n.call(e,o,i++)&&r.next(o)}))})}function jn(n,e){return e===void 0&&(e=cn),U(function(t,r){var i=null,o=null,s=null,c=function(){if(i){i.unsubscribe(),i=null;var d=o;o=null,r.next(d)}};function l(){var d=s+n,w=e.now();if(w<d){i=this.schedule(void 0,d-w),r.add(i);return}c()}t.subscribe(M(r,function(d){o=d,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},function(){c(),r.complete()},void 0,function(){o=i=null}))})}function kn(n){return U(function(e,t){var r=!1;e.subscribe(M(t,function(i){r=!0,t.next(i)},function(){r||t.next(n),t.complete()}))})}function Un(n){return n<=0?function(){return fn}:U(function(e,t){var r=0;e.subscribe(M(t,function(i){++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cn(n){return n===void 0&&(n=Mn),U(function(e,t){var r=!1;e.subscribe(M(t,function(i){r=!0,t.next(i)},function(){return r?t.complete():t.error(n())}))})}function Mn(){return new ge}function Wn(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?xt(function(i,o){return n(i,o,r)}):Ut,Un(1),t?kn(e):Cn(function(){return new ge}))}}function Rn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=ue(n);return U(function(r,i){(t?Jt(n,r,t):Jt(n,r)).subscribe(i)})}var X=function(){function n(e){this.name=e}return n}(),Dn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qt=function(n){Dn(e,n);function e(t){var r,i,o=n.call(this)||this;return o.name="ServiceNotFoundError",o.normalizedIdentifier="<UNKNOWN_IDENTIFIER>",typeof t=="string"?o.normalizedIdentifier=t:t instanceof X?o.normalizedIdentifier="Token<"+(t.name||"UNSET_NAME")+">":t&&(t.name||((r=t.prototype)===null||r===void 0?void 0:r.name))&&(o.normalizedIdentifier="MaybeConstructable<"+t.name+">"||"MaybeConstructable<"+((i=t.prototype)===null||i===void 0?void 0:i.name)+">"),o}return Object.defineProperty(e.prototype,"message",{get:function(){return'Service with "'+this.normalizedIdentifier+'" identifier was not found in the container. Register it before usage via explicitly calling the "Container.set" function or using the "@Service()" decorator.'},enumerable:!1,configurable:!0}),e}(Error),Fn=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kt=function(n){Fn(e,n);function e(t){var r,i,o=n.call(this)||this;return o.name="CannotInstantiateValueError",o.normalizedIdentifier="<UNKNOWN_IDENTIFIER>",typeof t=="string"?o.normalizedIdentifier=t:t instanceof X?o.normalizedIdentifier="Token<"+(t.name||"UNSET_NAME")+">":t&&(t.name||((r=t.prototype)===null||r===void 0?void 0:r.name))&&(o.normalizedIdentifier="MaybeConstructable<"+t.name+">"||"MaybeConstructable<"+((i=t.prototype)===null||i===void 0?void 0:i.name)+">"),o}return Object.defineProperty(e.prototype,"message",{get:function(){return'Cannot instantiate the requested value for the "'+this.normalizedIdentifier+`" identifier. The related metadata doesn't contain a factory or a type to instantiate.`},enumerable:!1,configurable:!0}),e}(Error),D=Symbol("EMPTY_VALUE"),N=globalThis&&globalThis.__assign||function(){return N=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},N.apply(this,arguments)},Ln=globalThis&&globalThis.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r},St=function(){function n(e){this.services=[],this.id=e}return n.prototype.has=function(e){return!!this.findService(e)},n.prototype.get=function(e){var t=rt.of(void 0),r=t.findService(e),i=this.findService(e);if(r&&r.global===!0)return this.getServiceValue(r);if(i)return this.getServiceValue(i);if(r&&this!==t){var o=N({},r);o.value=D,this.set(o);var s=this.getServiceValue(o);return this.set(N(N({},o),{value:s})),s}if(r)return this.getServiceValue(r);throw new Qt(e)},n.prototype.getMany=function(e){var t=this;return this.findAllServices(e).map(function(r){return t.getServiceValue(r)})},n.prototype.set=function(e,t){var r=this;if(e instanceof Array)return e.forEach(function(s){return r.set(s)}),this;if(typeof e=="string"||e instanceof X)return this.set({id:e,type:null,value:t,factory:void 0,global:!1,multiple:!1,eager:!1,transient:!1});if(typeof e=="function")return this.set({id:e,type:e,value:t,factory:void 0,global:!1,multiple:!1,eager:!1,transient:!1});var i=N({id:new X("UNREACHABLE"),type:null,factory:void 0,value:D,global:!1,multiple:!1,eager:!1,transient:!1},e),o=this.findService(i.id);return o&&o.multiple!==!0?Object.assign(o,i):this.services.push(i),i.eager&&this.get(i.id),this},n.prototype.remove=function(e){var t=this;return Array.isArray(e)?e.forEach(function(r){return t.remove(r)}):this.services=this.services.filter(function(r){return r.id===e?(t.destroyServiceInstance(r),!1):!0}),this},n.prototype.reset=function(e){var t=this;switch(e===void 0&&(e={strategy:"resetValue"}),e.strategy){case"resetValue":this.services.forEach(function(r){return t.destroyServiceInstance(r)});break;case"resetServices":this.services.forEach(function(r){return t.destroyServiceInstance(r)}),this.services=[];break;default:throw new Error("Received invalid reset strategy.")}return this},n.prototype.findAllServices=function(e){return this.services.filter(function(t){return t.id===e})},n.prototype.findService=function(e){return this.services.find(function(t){return t.id===e})},n.prototype.getServiceValue=function(e){var t,r=D;if(e.value!==D)return e.value;if(!e.factory&&!e.type)throw new Kt(e.id);if(e.factory)if(e.factory instanceof Array){var i=void 0;try{i=this.get(e.factory[0])}catch(l){if(l instanceof Qt)i=new e.factory[0];else throw l}r=i[e.factory[1]](this,e.id)}else r=e.factory(this,e.id);if(!e.factory&&e.type){var o=e.type,s=((t=Reflect)===null||t===void 0?void 0:t.getMetadata("design:paramtypes",o))||[],c=this.initializeParams(o,s);c.push(this),r=new(o.bind.apply(o,Ln([void 0],c)))}if(!e.transient&&r!==D&&(e.value=r),r===D)throw new Kt(e.id);return e.type&&this.applyPropertyHandlers(e.type,r),r},n.prototype.initializeParams=function(e,t){var r=this;return t.map(function(i,o){var s=rt.handlers.find(function(c){return(c.object===e||c.object===Object.getPrototypeOf(e))&&c.index===o});if(s)return s.value(r);if(i&&i.name&&!r.isPrimitiveParamType(i.name))return r.get(i)})},n.prototype.isPrimitiveParamType=function(e){return["string","boolean","number","object"].includes(e.toLowerCase())},n.prototype.applyPropertyHandlers=function(e,t){var r=this;rt.handlers.forEach(function(i){typeof i.index!="number"&&(i.object.constructor!==e&&!(e.prototype instanceof i.object.constructor)||i.propertyName&&(t[i.propertyName]=i.value(r)))})},n.prototype.destroyServiceInstance=function(e,t){t===void 0&&(t=!1);var r=t||!!e.type||!!e.factory;if(r){if(typeof(e==null?void 0:e.value).destroy=="function")try{e.value.destroy()}catch{}e.value=D}},n}(),rt=function(){function n(){}return n.of=function(e){if(e===void 0&&(e="default"),e==="default")return this.globalInstance;var t=this.instances.find(function(r){return r.id===e});return t||(t=new St(e),this.instances.push(t)),t},n.has=function(e){return this.globalInstance.has(e)},n.get=function(e){return this.globalInstance.get(e)},n.getMany=function(e){return this.globalInstance.getMany(e)},n.set=function(e,t){return this.globalInstance.set(e,t),this},n.remove=function(e){return this.globalInstance.remove(e),this},n.reset=function(e){if(e===void 0&&(e="default"),e=="default")this.globalInstance.reset(),this.instances.forEach(function(r){return r.reset()});else{var t=this.instances.find(function(r){return r.id===e});t&&(t.reset(),this.instances.splice(this.instances.indexOf(t),1))}return this},n.registerHandler=function(e){return this.handlers.push(e),this},n.import=function(e){return this},n.handlers=[],n.globalInstance=new St("default"),n.instances=[],n}();function ft(n){return function(e){var t={id:e,type:e,factory:void 0,multiple:!1,global:!1,eager:!1,transient:!1,value:D};n instanceof X||typeof n=="string"?t.id=n:n&&(t.id=n.id||e,t.factory=n.factory||void 0,t.multiple=n.multiple||!1,t.global=n.global||!1,t.eager=n.eager||!1,t.transient=n.transient||!1),rt.set(t)}}var Vn=Object.defineProperty,$n=Object.getOwnPropertyDescriptor,Hn=(n,e,t,r)=>{for(var i=r>1?void 0:r?$n(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Vn(e,t,i),i};let ut=class{encode(n){return btoa(n)}decode(n){return atob(n)}};ut=Hn([ft()],ut);var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ee;(function(n){(function(e){var t=typeof te=="object"?te:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=i(n);typeof t.Reflect>"u"?t.Reflect=n:r=i(t.Reflect,r),e(r);function i(o,s){return function(c,l){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:l}),s&&s(c,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",i=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",c={__proto__:[]}instanceof Array,l=!s&&!c,d={create:s?function(){return dt(Object.create(null))}:c?function(){return dt({__proto__:null})}:function(){return dt({})},has:l?function(u,a){return t.call(u,a)}:function(u,a){return a in u},get:l?function(u,a){return t.call(u,a)?u[a]:void 0}:function(u,a){return u[a]}},w=Object.getPrototypeOf(Function),T=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",g=!T&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:He(),P=!T&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ne(),j=!T&&typeof WeakMap=="function"?WeakMap:Ye(),x=new j;function Q(u,a,f,h){if(S(f)){if(!Ht(u))throw new TypeError;if(!Nt(a))throw new TypeError;return je(u,a)}else{if(!Ht(u))throw new TypeError;if(!I(a))throw new TypeError;if(!I(h)&&!S(h)&&!$(h))throw new TypeError;return $(h)&&(h=void 0),f=C(f),ke(u,a,f,h)}}e("decorate",Q);function L(u,a){function f(h,v){if(!I(h))throw new TypeError;if(!S(v)&&!De(v))throw new TypeError;Ft(u,a,h,v)}return f}e("metadata",L);function V(u,a,f,h){if(!I(f))throw new TypeError;return S(h)||(h=C(h)),Ft(u,a,f,h)}e("defineMetadata",V);function Se(u,a,f){if(!I(a))throw new TypeError;return S(f)||(f=C(f)),Wt(u,a,f)}e("hasMetadata",Se);function Ee(u,a,f){if(!I(a))throw new TypeError;return S(f)||(f=C(f)),lt(u,a,f)}e("hasOwnMetadata",Ee);function Ie(u,a,f){if(!I(a))throw new TypeError;return S(f)||(f=C(f)),Rt(u,a,f)}e("getMetadata",Ie);function Pe(u,a,f){if(!I(a))throw new TypeError;return S(f)||(f=C(f)),Dt(u,a,f)}e("getOwnMetadata",Pe);function Oe(u,a){if(!I(u))throw new TypeError;return S(a)||(a=C(a)),Lt(u,a)}e("getMetadataKeys",Oe);function Te(u,a){if(!I(u))throw new TypeError;return S(a)||(a=C(a)),Vt(u,a)}e("getOwnMetadataKeys",Te);function Ae(u,a,f){if(!I(a))throw new TypeError;S(f)||(f=C(f));var h=B(a,f,!1);if(S(h)||!h.delete(u))return!1;if(h.size>0)return!0;var v=x.get(a);return v.delete(f),v.size>0||x.delete(a),!0}e("deleteMetadata",Ae);function je(u,a){for(var f=u.length-1;f>=0;--f){var h=u[f],v=h(a);if(!S(v)&&!$(v)){if(!Nt(v))throw new TypeError;a=v}}return a}function ke(u,a,f,h){for(var v=u.length-1;v>=0;--v){var O=u[v],y=O(a,f,h);if(!S(y)&&!$(y)){if(!I(y))throw new TypeError;h=y}}return h}function B(u,a,f){var h=x.get(u);if(S(h)){if(!f)return;h=new g,x.set(u,h)}var v=h.get(a);if(S(v)){if(!f)return;v=new g,h.set(a,v)}return v}function Wt(u,a,f){var h=lt(u,a,f);if(h)return!0;var v=ht(a);return $(v)?!1:Wt(u,v,f)}function lt(u,a,f){var h=B(a,f,!1);return S(h)?!1:We(h.has(u))}function Rt(u,a,f){var h=lt(u,a,f);if(h)return Dt(u,a,f);var v=ht(a);if(!$(v))return Rt(u,v,f)}function Dt(u,a,f){var h=B(a,f,!1);if(!S(h))return h.get(u)}function Ft(u,a,f,h){var v=B(f,h,!0);v.set(u,a)}function Lt(u,a){var f=Vt(u,a),h=ht(u);if(h===null)return f;var v=Lt(h,a);if(v.length<=0)return f;if(f.length<=0)return v;for(var O=new P,y=[],m=0,p=f;m<p.length;m++){var b=p[m],_=O.has(b);_||(O.add(b),y.push(b))}for(var R=0,zt=v;R<zt.length;R++){var b=zt[R],_=O.has(b);_||(O.add(b),y.push(b))}return y}function Vt(u,a){var f=[],h=B(u,a,!1);if(S(h))return f;for(var v=h.keys(),O=Fe(v),y=0;;){var m=Ve(O);if(!m)return f.length=y,f;var p=Le(m);try{f[y]=p}catch(b){try{$e(O)}finally{throw b}}y++}}function $t(u){if(u===null)return 1;switch(typeof u){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return u===null?1:6;default:return 6}}function S(u){return u===void 0}function $(u){return u===null}function Ue(u){return typeof u=="symbol"}function I(u){return typeof u=="object"?u!==null:typeof u=="function"}function Ce(u,a){switch($t(u)){case 0:return u;case 1:return u;case 2:return u;case 3:return u;case 4:return u;case 5:return u}var f=a===3?"string":a===5?"number":"default",h=Yt(u,i);if(h!==void 0){var v=h.call(u,f);if(I(v))throw new TypeError;return v}return Me(u,f==="default"?"number":f)}function Me(u,a){if(a==="string"){var f=u.toString;if(H(f)){var h=f.call(u);if(!I(h))return h}var v=u.valueOf;if(H(v)){var h=v.call(u);if(!I(h))return h}}else{var v=u.valueOf;if(H(v)){var h=v.call(u);if(!I(h))return h}var O=u.toString;if(H(O)){var h=O.call(u);if(!I(h))return h}}throw new TypeError}function We(u){return!!u}function Re(u){return""+u}function C(u){var a=Ce(u,3);return Ue(a)?a:Re(a)}function Ht(u){return Array.isArray?Array.isArray(u):u instanceof Object?u instanceof Array:Object.prototype.toString.call(u)==="[object Array]"}function H(u){return typeof u=="function"}function Nt(u){return typeof u=="function"}function De(u){switch($t(u)){case 3:return!0;case 4:return!0;default:return!1}}function Yt(u,a){var f=u[a];if(f!=null){if(!H(f))throw new TypeError;return f}}function Fe(u){var a=Yt(u,o);if(!H(a))throw new TypeError;var f=a.call(u);if(!I(f))throw new TypeError;return f}function Le(u){return u.value}function Ve(u){var a=u.next();return a.done?!1:a}function $e(u){var a=u.return;a&&a.call(u)}function ht(u){var a=Object.getPrototypeOf(u);if(typeof u!="function"||u===w||a!==w)return a;var f=u.prototype,h=f&&Object.getPrototypeOf(f);if(h==null||h===Object.prototype)return a;var v=h.constructor;return typeof v!="function"||v===u?a:v}function He(){var u={},a=[],f=function(){function y(m,p,b){this._index=0,this._keys=m,this._values=p,this._selector=b}return y.prototype["@@iterator"]=function(){return this},y.prototype[o]=function(){return this},y.prototype.next=function(){var m=this._index;if(m>=0&&m<this._keys.length){var p=this._selector(this._keys[m],this._values[m]);return m+1>=this._keys.length?(this._index=-1,this._keys=a,this._values=a):this._index++,{value:p,done:!1}}return{value:void 0,done:!0}},y.prototype.throw=function(m){throw this._index>=0&&(this._index=-1,this._keys=a,this._values=a),m},y.prototype.return=function(m){return this._index>=0&&(this._index=-1,this._keys=a,this._values=a),{value:m,done:!0}},y}();return function(){function y(){this._keys=[],this._values=[],this._cacheKey=u,this._cacheIndex=-2}return Object.defineProperty(y.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),y.prototype.has=function(m){return this._find(m,!1)>=0},y.prototype.get=function(m){var p=this._find(m,!1);return p>=0?this._values[p]:void 0},y.prototype.set=function(m,p){var b=this._find(m,!0);return this._values[b]=p,this},y.prototype.delete=function(m){var p=this._find(m,!1);if(p>=0){for(var b=this._keys.length,_=p+1;_<b;_++)this._keys[_-1]=this._keys[_],this._values[_-1]=this._values[_];return this._keys.length--,this._values.length--,m===this._cacheKey&&(this._cacheKey=u,this._cacheIndex=-2),!0}return!1},y.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=u,this._cacheIndex=-2},y.prototype.keys=function(){return new f(this._keys,this._values,h)},y.prototype.values=function(){return new f(this._keys,this._values,v)},y.prototype.entries=function(){return new f(this._keys,this._values,O)},y.prototype["@@iterator"]=function(){return this.entries()},y.prototype[o]=function(){return this.entries()},y.prototype._find=function(m,p){return this._cacheKey!==m&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=m)),this._cacheIndex<0&&p&&(this._cacheIndex=this._keys.length,this._keys.push(m),this._values.push(void 0)),this._cacheIndex},y}();function h(y,m){return y}function v(y,m){return m}function O(y,m){return[y,m]}}function Ne(){return function(){function u(){this._map=new g}return Object.defineProperty(u.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),u.prototype.has=function(a){return this._map.has(a)},u.prototype.add=function(a){return this._map.set(a,a),this},u.prototype.delete=function(a){return this._map.delete(a)},u.prototype.clear=function(){this._map.clear()},u.prototype.keys=function(){return this._map.keys()},u.prototype.values=function(){return this._map.values()},u.prototype.entries=function(){return this._map.entries()},u.prototype["@@iterator"]=function(){return this.keys()},u.prototype[o]=function(){return this.keys()},u}()}function Ye(){var u=16,a=d.create(),f=h();return function(){function p(){this._key=h()}return p.prototype.has=function(b){var _=v(b,!1);return _!==void 0?d.has(_,this._key):!1},p.prototype.get=function(b){var _=v(b,!1);return _!==void 0?d.get(_,this._key):void 0},p.prototype.set=function(b,_){var R=v(b,!0);return R[this._key]=_,this},p.prototype.delete=function(b){var _=v(b,!1);return _!==void 0?delete _[this._key]:!1},p.prototype.clear=function(){this._key=h()},p}();function h(){var p;do p="@@WeakMap@@"+m();while(d.has(a,p));return a[p]=!0,p}function v(p,b){if(!t.call(p,f)){if(!b)return;Object.defineProperty(p,f,{value:d.create()})}return p[f]}function O(p,b){for(var _=0;_<b;++_)p[_]=Math.random()*255|0;return p}function y(p){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(p)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(p)):O(new Uint8Array(p),p):O(new Array(p),p)}function m(){var p=y(u);p[6]=p[6]&79|64,p[8]=p[8]&191|128;for(var b="",_=0;_<u;++_){var R=p[_];(_===4||_===6||_===8)&&(b+="-"),R<16&&(b+="0"),b+=R.toString(16).toLowerCase()}return b}}function dt(u){return u.__=void 0,delete u.__,u}})})(ee||(ee={}));class Nn{constructor(e){this.controllers=e}run(){window.addEventListener("DOMContentLoaded",()=>{const e=new St(new Date().toISOString());e.set(Window,window),this.controllers.forEach(t=>{const r=e.get(t);r.onInit&&r.onInit()})})}}var Yn=Object.defineProperty,zn=Object.getOwnPropertyDescriptor,Gn=(n,e,t,r)=>{for(var i=r>1?void 0:r?zn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Yn(e,t,i),i};let at=class{constructor(n){var i;this.queryParams$=new on(1),this.window=n.get(Window);const e=new URLSearchParams(((i=this.window.location)==null?void 0:i.search)||"").entries();let t=e.next();const r=[];for(;!t.done;)r.push(t.value),t=e.next();this.queryParams$.next(r.sort((o,s)=>s[0].localeCompare(o[0])).map(o=>({[o[0]]:o[1]})).reduce((o,s)=>({...o,...s}),{}))}navigate(n){const e=new URL(this.window.location.href);Object.keys(n).forEach(t=>{e.searchParams.set(t,n[t])}),this.window.history.pushState(null,"Free Mathematic Formula Drawer",e.search),this.queryParams$.next(n)}};at=Gn([ft()],at);class et extends Error{}class Et extends Error{}class ct{constructor(e){this.value=e}}class k{constructor(e){this.value=e}}const it=["ratio","center"];function yt(n,e,t){return new ct(e.value/2+n.value*t)}function mt(n,e,t){return new ct(e.value/2+n.value*t)}function It(n){return!Number.isNaN(n)}function qn(n){return It(n)&&Number.isInteger(n)}function ne(n){return qn(n)&&n!==0}var Bn=Object.defineProperty,Xn=Object.getOwnPropertyDescriptor,Zn=(n,e,t,r)=>{for(var i=r>1?void 0:r?Xn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Bn(e,t,i),i};let Pt=class{constructor(n){this.ratio={unit:1,pixelsPeerUnits:100},this.center={x:new k(0),y:new k(0)},this.router=n.get(at),this.encoder=n.get(ut);const t=n.get(Window).document.querySelector("canvas");if(!t)throw new Et;this.canvas=t;const r=t.getContext("2d");if(!r)throw new Et;this.context=r;const i=t.height=t.offsetHeight;this.canvasHeight=new ct(i);const o=t.width=t.offsetWidth;this.canvasWidth=new ct(o)}onInit(){const n=new Ct;n.pipe(Rn(void 0),jn(0)).subscribe(()=>{this.draw()});const e=this.router.queryParams$;e.pipe(xt(t=>!!Object.keys(t).find(r=>!it.includes(r)))).subscribe(()=>{n.next()}),e.pipe(xt(t=>!!Object.keys(t).find(r=>it.includes(r)))).subscribe(t=>{it.forEach(r=>{const i=t[r];if(r==="ratio"&&!!i){const[o,s]=this.encoder.decode(i).split("/"),c=+o;if(!ne(c))throw new et;const l=+s;if(!ne(l))throw new et;this.ratio.unit=c,this.ratio.pixelsPeerUnits=l,n.next();return}if(r==="center"&&!!i){const[o,s]=this.encoder.decode(i).split("/"),c=parseFloat(o);if(!It(c))throw new et;const l=parseFloat(s);if(!It(l))throw new et;this.center.x=new k(c),this.center.y=new k(l),n.next();return}})}),this.canvas.addEventListener("wheel",t=>{const r=t.wheelDeltaY>0,i=5;r?this.ratio.pixelsPeerUnits+=i:this.ratio.pixelsPeerUnits>i+1&&(this.ratio.pixelsPeerUnits-=i),this.router.navigate({ratio:this.encoder.encode(`${this.ratio.unit}/${this.ratio.pixelsPeerUnits}`)})})}draw(){this.context.clearRect(0,0,this.canvasWidth.value,this.canvasHeight.value);const n=this.center.x.value-this.canvasWidth.value/2,e=this.center.y.value-this.canvasHeight.value/2,t=this.center.x.value+this.canvasWidth.value/2,r=this.center.y.value+this.canvasHeight.value/2;if(n<0&&t>0){this.context.beginPath(),this.context.strokeStyle="red",this.context.lineWidth=1;const s=this.center.x.value>=0?this.center.x:new k(-this.center.x.value),c=yt(s,this.canvasWidth,this.ratio.pixelsPeerUnits);this.context.moveTo(c.value,0),this.context.lineTo(c.value,this.canvasHeight.value),this.context.stroke()}if(e<0&&r>0){this.context.beginPath(),this.context.strokeStyle="grey",this.context.lineWidth=1;const s=this.center.y.value>=0?this.center.y:new k(-this.center.y.value),c=mt(s,this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.moveTo(0,c.value),this.context.lineTo(this.canvasWidth.value,c.value),this.context.stroke()}const i=this.computeMiddleOfUnitsOnAxe(this.canvasWidth);for(let s=0-i;s<i;s=s+this.ratio.unit){this.context.beginPath(),this.context.strokeStyle="#000000",this.context.font="12px Arial";const c=yt(new k(s),this.canvasWidth,this.ratio.pixelsPeerUnits),l=mt(new k(0),this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.fillText(s.toString(),c.value-18,l.value-6),this.context.fillRect(c.value,l.value-5,1,10)}const o=this.computeMiddleOfUnitsOnAxe(this.canvasWidth);for(let s=0-o;s<o;s=s+this.ratio.unit){this.context.beginPath(),this.context.strokeStyle="#000000",this.context.font="12px Arial";const c=yt(new k(0),this.canvasWidth,this.ratio.pixelsPeerUnits),l=mt(new k(s),this.canvasHeight,this.ratio.pixelsPeerUnits);this.context.fillText(s.toString(),c.value-18,l.value-6),this.context.fillRect(c.value-5,l.value,10,1)}}computeMiddleOfUnitsOnAxe(n){return parseFloat((n.value/this.ratio.pixelsPeerUnits).toFixed(this.ratio.unit-1))/2}};Pt=Zn([ft()],Pt);var Jn=Object.defineProperty,Qn=Object.getOwnPropertyDescriptor,Kn=(n,e,t,r)=>{for(var i=r>1?void 0:r?Qn(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Jn(e,t,i),i};let Ot=class{constructor(n){this.textareas=new Array,this.router=n.get(at),this.encoder=n.get(ut);const e=n.get(Window);this.document=e.document;const t=this.document.querySelector("form");if(!t)throw new Et;this.form=t}onInit(){this.router.queryParams$.pipe(Wn(),gt(n=>Object.keys(n).filter(e=>!it.includes(e)).reduce((e,t)=>({...e,[t]:this.encoder.decode(n[t])}),{})),gt(n=>Object.keys(n).length>0?n:{f:""})).subscribe(n=>{Object.keys(n).forEach(e=>{this.createFormulaField({key:e,queryParams:n})})}),this.form.addEventListener("submit",n=>{n.preventDefault();const e=this.textareas.sort((t,r)=>t.name.localeCompare(r.name)).map(t=>({[t.name]:this.encoder.encode(t.value)})).reduce((t,r)=>({...t,...r}),{});this.router.navigate(e)})}createFormulaField({key:n,queryParams:e}){const t=this.document.createElement("div"),r=this.document.createElement("label");r.textContent=`${n}(x) = `,r.htmlFor=n,t.appendChild(r);const i=this.document.createElement("textarea");i.name=n;const o=e[n];i.value=o,i.placeholder="Formula",i.rows=o.split(`
`).length,i.addEventListener("keypress",s=>{s.code==="Enter"&&(s.shiftKey||(s.preventDefault(),this.form.dispatchEvent(new SubmitEvent("submit"))))}),i.addEventListener("keyup",()=>{const c=i.value.split(`
`).length-i.rows;if(c!==0)for(let l=0;l<Math.abs(c);++l){if(c>0){i.rows++;return}i.rows--}}),t.appendChild(i),this.textareas.push(i),this.form.prepend(t)}};Ot=Kn([ft()],Ot);new Nn([Ot,Pt]).run();
